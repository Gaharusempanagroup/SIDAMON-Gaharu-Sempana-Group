<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  
  <title>SIDAMON Gaharu Sempana Group</title>
  <link rel="icon" type="image/png" href="Light Transparant.PNG">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  
  <style>
    /* --- STYLES SAMA SEPERTI SEBELUMNYA --- */
    :root { --primary-color: #000080; --bg-light: #f4f6f9; --text-dark: #333; }
    
    html, body { height: 100%; margin: 0; padding: 0; }
    body.login-mode { overflow: hidden; position: fixed; width: 100%; }
    body { background-color: var(--bg-light); font-family: 'Poppins', 'Segoe UI', sans-serif; -webkit-tap-highlight-color: transparent; }
    
    .bg-primary { background-color: var(--primary-color) !important; }
    .btn-primary { background-color: var(--primary-color); border-color: var(--primary-color); }
    .btn-primary:hover { background-color: #000060; border-color: #000060; }

    /* LOGIN PAGE */
    #login-section { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; height: 100dvh; display: flex; align-items: center; justify-content: center; background: linear-gradient(-45deg, #000428, #004e92, #000080, #1cb5e0); background-size: 400% 400%; animation: gradientBG 15s ease infinite; overflow: hidden; z-index: 9999; padding: 20px; }
    @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    
    .login-card { width: 100%; max-width: 420px; padding: 40px; border-radius: 20px; background: rgba(255, 255, 255, 0.15); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.18); text-align: center; animation: fadeInUp 0.8s ease-out; position: relative; z-index: 10; }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    
    .login-logo { height: 90px; margin-bottom: 20px; }
    .login-title { color: #ffffff; font-weight: 700; margin-bottom: 5px; letter-spacing: 1px; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
    .login-subtitle { color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; margin-bottom: 30px; font-weight: 300; }
    .login-footer { position: absolute; bottom: 20px; left: 0; width: 100%; text-align: center; color: rgba(255, 255, 255, 0.5); font-size: 0.75rem; z-index: 20; pointer-events: none; letter-spacing: 1px; font-weight: 300; }
    
    .form-floating > .form-control { border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.6); height: 55px; background: rgba(255, 255, 255, 0.25); color: #fff; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); }
    .form-floating > .form-control:focus { border-color: #fff; background: rgba(255, 255, 255, 0.35); box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); outline: none; }
    .form-floating > label { color: rgba(255, 255, 255, 0.9); font-weight: 500; }
    .form-floating > .form-control:focus ~ label, .form-floating > .form-control:not(:placeholder-shown) ~ label { color: rgba(255, 255, 255, 1); font-weight: 600; opacity: 1; }
    .form-floating > .form-control:focus ~ label::after, .form-floating > .form-control:not(:placeholder-shown) ~ label::after { background-color: transparent !important; }
    
    .btn-login { background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05)); border: 1px solid rgba(255, 255, 255, 0.6); color: white; height: 55px; border-radius: 50px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; font-size: 0.9rem; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); backdrop-filter: blur(5px); transition: all 0.4s ease; position: relative; overflow: hidden; width: 100%; touch-action: manipulation; cursor: pointer; }
    .btn-login:hover { transform: translateY(-3px); background: rgba(255, 255, 255, 0.25); border-color: #ffffff; box-shadow: 0 0 25px rgba(255, 255, 255, 0.4); color: white !important; }
    
    #login-alert { display: none; margin-top: 15px; padding: 12px 20px; border-radius: 15px; background: rgba(220, 53, 69, 0.15); border: 1px solid rgba(220, 53, 69, 0.4); color: #ffcccc; font-size: 0.85rem; font-weight: 500; backdrop-filter: blur(5px); align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 15px rgba(220, 53, 69, 0.1); }

    /* DASHBOARD */
    #dashboard-section { display: none; padding-bottom: 50px; }
    .logo-wrapper { background: transparent !important; padding: 0 !important; border: none !important; box-shadow: none !important; margin-right: 15px; display: flex; align-items: center; justify-content: center; }
    .greeting-wrapper { padding: 6px 0; margin-left: 15px; cursor: default; }

    /* PILLS */
    .nav-pills .nav-link { border-radius: 50px; padding: 10px 25px; font-weight: 600; color: #555; background: white; border: 1px solid #ddd; transition: all 0.2s; }
    .nav-pills .nav-link.active { background-color: var(--primary-color); color: white; border-color: var(--primary-color); box-shadow: 0 4px 15px rgba(0, 0, 128, 0.3); }
    .nav-pills .nav-link:hover:not(.active) { background-color: #f8f9fa; transform: translateY(-3px); color: var(--primary-color); }
    
    .sub-nav .btn { border-radius: 20px; font-size: 0.85rem; font-weight: 600; padding: 6px 15px; border: 1px solid #ddd; background: white; color: #555; transition: all 0.2s ease; }
    .sub-nav .btn.active { background-color: #000080; color: white; border-color: #000080; box-shadow: 0 4px 8px rgba(0,0,0,0.15); }

    /* STATS */
    .stat-card { border: none; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); transition: transform 0.3s ease; color: white; overflow: hidden; height: 100%; position: relative; z-index: 1; }
    .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.2) !important; }
    .stat-value { font-size: 2.5rem; font-weight: 700; line-height: 1; }
    .stat-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.9; }
    .bg-gradient-primary { background: linear-gradient(45deg, var(--primary-color), #333399); }
    .bg-gradient-success { background: linear-gradient(45deg, #1cc88a, #13855c); } 
    .bg-gradient-danger { background: linear-gradient(45deg, #e74a3b, #be2617); }
    .bg-gradient-warning { background: linear-gradient(45deg, #f6c23e, #dda20a); }

    /* TABLE */
    .search-input { height: 50px; border-radius: 25px; padding-left: 55px; border: 1px solid #ced4da; transition: all 0.3s; }
    .search-input:focus { box-shadow: 0 4px 15px rgba(0, 0, 128, 0.15); border-color: var(--primary-color); }
    .search-icon { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); color: #aaa; z-index: 5; font-size: 1.1rem; }
    .table-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: none; }
    .table thead th { background-color: #f8f9fc; color: #5a5c69; font-weight: 600; vertical-align: middle; border-bottom: 2px solid #eaecf4; }
    .badge-status { padding: 6px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; white-space: normal; display: inline-block; }
    .status-expired { background-color: #ffe5e5; color: #cc0000; border: 1px solid #ffcccc; }
    .status-active { background-color: #e5ffe5; color: #007700; border: 1px solid #ccffcc; }
    .status-used { background-color: #fff4e5; color: #cc7700; border: 1px solid #ffeebb; } 
    .status-not-started { background-color: #e2e3e5; color: #383d41; border: 1px solid #d6d8db; }
    .table-responsive { width: 100%; overflow-x: auto !important; margin-bottom: 10px; border: 1px solid #f0f0f0; border-radius: 8px; }
    
    .nested-cell { display: flex; align-items: center; min-height: 45px; border-bottom: 1px solid #f5f5f5; padding: 6px 0; }
    .nested-cell:last-child { border-bottom: none; }
    .align-middle-person { vertical-align: middle !important; }

    /* SKELETON */
    .skeleton { background: linear-gradient(to right, #e0e0e0 0%, #f0f0f0 50%, #e0e0e0 100%); background-size: 200% 100%; animation: shimmer 1.5s infinite linear; border-radius: 4px; display: inline-block; }
    .skeleton-text { height: 16px; width: 80%; margin-bottom: 5px; }
    .skeleton-cell { height: 40px; width: 100%; }
    @keyframes shimmer { 0% {background-position: -1000px 0;} 100% {background-position: 1000px 0;} }

    /* PAGINATION */
    .pagination-wrapper { display: flex; justify-content: center; align-items: center; gap: 5px; margin-top: 15px; }
    .btn-page { border: 1px solid #ddd; background: white; color: var(--primary-color); border-radius: 8px; padding: 5px 12px; font-size: 0.85rem; transition: all 0.2s; }
    .btn-page:hover { background: #f0f7ff; border-color: var(--primary-color); }
    .btn-page.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }
    .btn-page:disabled { opacity: 0.5; cursor: not-allowed; }

    #loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); display: none; justify-content: center; align-items: center; z-index: 9999; flex-direction: column; }
    input[list] { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="%23333" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>'); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 12px; padding-right: 2rem; cursor: pointer; }
    
    /* GANTT (Simplified) */
    .custom-gantt-wrapper { display: flex; flex-direction: column; background: #fff; border: 1px solid #e0e0e0; border-radius: 10px; overflow-x: auto; position: relative; }
    .custom-tooltip { position: fixed; display: none; background: rgba(255, 255, 255, 0.98); border: 1px solid #eee; border-left: 5px solid var(--primary-color); padding: 12px 16px; border-radius: 8px; box-shadow: 0 8px 24px rgba(0,0,0,0.15); z-index: 9999; }
  </style>
</head>
<body class="login-mode">

  <div id="gantt-tooltip" class="custom-tooltip"></div>
  <div id="loading-overlay">
    <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;"></div>
    <div class="mt-3 fw-bold text-secondary" id="loading-text">Memuat Data...</div>
  </div>

  <div id="login-section">
    <div class="login-card">
      <img src="IMG_0992.PNG" alt="Logo" class="login-logo">
      <h3 class="login-title">SIDAMON</h3>
      <p class="login-subtitle">Sistem Database & Monitoring</p>
      <form onsubmit="handleLogin(event)">
        <div class="form-floating mb-4 text-start">
          <input type="password" class="form-control" id="passwordInput" placeholder="Password" required oninput="hideLoginError()">
          <label for="passwordInput">Masukkan Password Akses</label>
        </div>
        <button type="submit" class="btn btn-login w-100" id="loginBtn">MASUK DASHBOARD</button>
        <div id="login-alert">
            <i class="bi bi-exclamation-triangle-fill"></i><span>Password Salah. Silahkan coba lagi.</span>
        </div>
      </form>
    </div>
    <div class="login-footer">Â© 2026 Gaharu Sempana Group. All Rights Reserved.<br>Developed by IT Division</div>
  </div>

  <div id="dashboard-section">
    <nav class="navbar navbar-dark bg-primary shadow-sm mb-4 py-2">
      <div class="container-fluid px-4 px-lg-5 d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center">
          <div class="logo-wrapper"><img src="IMG_0992.PNG" alt="Logo" style="height: 50px; width: auto;"></div>
          <div class="d-flex flex-column justify-content-center">
            <span class="text-white fw-bold" style="font-size: 1.1rem;">SIDAMON Gaharu Sempana Group</span>
            <span class="text-white text-uppercase" style="font-size: 0.75rem; opacity: 0.85;">Dashboard Sistem Database & Monitoring</span>
          </div>
        </div>
        <div class="d-flex align-items-center gap-3">
             <div class="d-none d-md-block greeting-wrapper text-end text-white">
                <div id="greeting-time" style="font-size: 0.75rem; opacity: 0.9;"></div>
                <div id="greeting-role" style="font-size: 0.9rem; font-weight: 600;"></div>
            </div>
            <button class="btn btn-outline-light btn-sm rounded-circle shadow-sm" id="btnAuditLog" onclick="showAuditLog()" title="Audit Log" style="display:none; width:35px; height:35px;"><i class="bi bi-clock-history"></i></button>
            <button class="btn btn-danger btn-sm rounded-pill px-3 shadow-sm" onclick="handleLogout()"><i class="bi bi-box-arrow-right me-1"></i>Logout</button>
        </div>
      </div>
    </nav>

    <div class="container-fluid px-4 px-lg-5"> 
      <ul class="nav nav-pills mb-4 justify-content-center gap-3" id="pills-tab">
        <li class="nav-item" id="nav-skk"><button class="nav-link active" onclick="switchView('skk')"><i class="bi bi-person-badge me-2"></i>Sertifikat Keahlian</button></li>
        <li class="nav-item" id="nav-penugasan"><button class="nav-link" onclick="switchView('penugasan')"><i class="bi bi-calendar-check me-2"></i>Waktu Penugasan</button></li>
        <li class="nav-item" id="nav-project"><button class="nav-link" onclick="switchView('project')"><i class="bi bi-kanban me-2"></i>Master Project</button></li>
      </ul>

      <div id="view-skk" class="view-section active-view">
        <div class="stats-wrapper">
            <div class="row g-3 mb-4 justify-content-center">
              <div class="col-12 col-sm-6 col-lg-4"><div class="stat-card bg-gradient-primary p-3 d-flex justify-content-between"><div><div class="stat-label">Total Personil</div><div class="stat-value" id="skk-total">0</div></div><i class="bi bi-people-fill fs-1 opacity-50"></i></div></div>
              <div class="col-12 col-sm-6 col-lg-4"><div class="stat-card bg-gradient-danger p-3 d-flex justify-content-between"><div><div class="stat-label">Expired</div><div class="stat-value" id="skk-expired">0</div></div><i class="bi bi-exclamation-triangle-fill fs-1 opacity-50"></i></div></div>
              <div class="col-12 col-sm-6 col-lg-4"><div class="stat-card bg-gradient-warning p-3 d-flex justify-content-between"><div><div class="stat-label">Personil Terpakai</div><div class="stat-value" id="skk-used">0</div></div><i class="bi bi-briefcase-fill fs-1 opacity-50"></i></div></div>
            </div>
        </div>
        <div class="row mb-4 g-2 align-items-center">
          <div class="col-md" id="searchSkkContainer"><div class="position-relative w-100"><i class="bi bi-search search-icon"></i><input type="text" id="searchSkk" class="form-control search-input" placeholder="Cari Nama Personil, Sertifikat..."></div></div>
          <div class="col-md-auto" id="btnAddDataContainer"><button class="btn btn-success rounded-pill fw-bold shadow-sm h-100 px-4" onclick="openModalAdd()"><i class="bi bi-plus-lg me-2"></i>Tambah Data</button></div>
        </div>
        <div class="table-card">
          <div class="table-responsive">
            <table class="table table-hover align-middle"><thead class="table-light"><tr><th style="width:20%;">Nama Personil</th><th class="text-center">Kontak</th><th style="width:20%;">Bidang Ilmu</th><th style="width:20%;">Sertifikat</th><th class="text-center">Jenjang</th><th class="text-center">Sisa Waktu</th><th class="text-center">Status</th><th>Keterangan</th><th class="text-center" id="th-aksi-skk">Aksi</th></tr></thead><tbody id="bodySkk"></tbody></table>
            <div id="msgSkk" class="text-center py-4 text-muted d-none">Data tidak ditemukan.</div>
          </div>
          <div id="pagination-skk" class="pagination-wrapper"></div>
        </div>
      </div>
      
      <div id="view-penugasan" class="view-section" style="display: none;">
         <div class="alert alert-info">Fitur Penugasan (Placeholder)</div>
      </div>
      
      <div id="view-project" class="view-section" style="display: none;">
         <div class="alert alert-info">Fitur Project (Placeholder)</div>
      </div>
    </div> 
  </div>

  <div class="modal fade" id="modalTambahData" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white"><h5 class="modal-title" id="modalLabel">Input Data Personil</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
        <div class="modal-body">
          <form id="formInputData">
            <input type="hidden" id="editRowNumber" value="">
            <div class="mb-3"><label class="form-label small fw-bold">Nama Personil</label><input class="form-control" list="listNama" id="inputNama" required autocomplete="off"><datalist id="listNama"></datalist></div>
            <div class="mb-3"><label class="form-label small fw-bold">Perusahaan</label><input class="form-control" list="listPerusahaan" id="inputPerusahaan" required autocomplete="off"><datalist id="listPerusahaan"></datalist></div>
            <div class="row"><div class="col-md-6 mb-3"><label class="form-label small fw-bold">Sertifikat Keahlian</label><input class="form-control" list="listSertifikat" id="inputSertifikat" required autocomplete="off"><datalist id="listSertifikat"></datalist></div><div class="col-md-6 mb-3"><label class="form-label small fw-bold">Jenjang</label><input class="form-control" list="listJenjang" id="inputJenjang" required autocomplete="off"><datalist id="listJenjang"></datalist></div></div>
            <div class="mb-3"><label class="form-label small fw-bold">Asosiasi</label><input type="text" class="form-control" id="inputAsosiasi"></div>
            <div class="mb-3"><label class="form-label small fw-bold">Masa Berlaku</label><input type="date" class="form-control" id="inputMasaBerlaku" required></div>
            <div class="mb-3"><label class="form-label small fw-bold">Keterangan</label><textarea class="form-control" id="inputKeterangan" rows="2"></textarea></div>
          </form>
        </div>
        <div class="modal-footer"><button type="button" class="btn btn-secondary rounded-pill" data-bs-dismiss="modal">Batal</button><button type="button" class="btn btn-primary rounded-pill" onclick="submitForm()">Simpan Data</button></div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="modalAuditLog" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title fw-bold"><i class="bi bi-shield-lock-fill me-2"></i>System Audit Log</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
        <div class="modal-body bg-light">
          <div class="table-responsive bg-white rounded shadow-sm border p-2">
            <table class="table table-sm table-striped mb-0" style="font-size: 0.85rem;">
                <thead><tr><th>Waktu</th><th>Tipe</th><th>Pesan</th></tr></thead><tbody id="bodyAuditLog"></tbody>
            </table>
          </div>
          <div class="text-muted small mt-2">* Log disimpan maksimal 6 bulan.</div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // --- KONFIGURASI PENTING ---
    // GANTI DENGAN URL DEPLOYMENT BARU ANDA
    const CONST_API_URL = "https://script.google.com/macros/s/AKfycbw5HBU0rbZ2occIJ77QlUQpt2nMAQrFu_pKdEkS0kJmK8ooi6SQQL1M0xU_3NztAqRACw/exec";

    // --- GLOBAL VARS ---
    const ITEMS_PER_PAGE = 20; 
    let currentUserRole = ''; 

    // --- HELPER FETCH ---
    async function fetchAPI(action, method = 'GET', data = null) {
        let url = `${CONST_API_URL}?action=${action}`;
        const options = { method: method };
        if (method === 'POST') {
            options.headers = { "Content-Type": "text/plain;charset=utf-8" };
            options.body = JSON.stringify({ action: action, ...data });
        }
        const response = await fetch(url, options);
        return await response.json();
    }

    // --- LOGIN LOGIC ---
    window.addEventListener('DOMContentLoaded', () => {
        const storedRole = sessionStorage.getItem('userRole');
        if (storedRole) loginSuccess(storedRole);
    });

    async function handleLogin(e) {
      e.preventDefault();
      const pass = document.getElementById('passwordInput').value;
      const btn = document.getElementById('loginBtn');
      const alertBox = document.getElementById('login-alert');
      
      alertBox.style.display = 'none';
      btn.innerHTML = 'Memeriksa...'; btn.disabled = true;
      
      try {
          const response = await fetchAPI('login', 'POST', { password: pass });
          if (response && response.valid) {
             loginSuccess(response.role);
          } else {
            btn.innerHTML = 'MASUK DASHBOARD'; btn.disabled = false;
            alertBox.style.display = 'flex';
          }
      } catch (err) {
            btn.innerHTML = 'MASUK DASHBOARD'; btn.disabled = false;
            alert('Koneksi Error');
      }
    }

    function loginSuccess(role) {
        currentUserRole = role; 
        sessionStorage.setItem('userRole', role);
        document.getElementById('login-section').style.display = 'none';
        document.getElementById('dashboard-section').style.display = 'block';
        document.body.classList.remove('login-mode');
        
        // Show components based on role
        if(role === 'SUPER_ADMIN') document.getElementById('btnAuditLog').style.display = 'inline-block';
        // ... (role logic lain) ...
        
        loadAllData(); 
    }

    function hideLoginError() { document.getElementById('login-alert').style.display = 'none'; }

    // --- LOGOUT LOGIC (FIXED NO DELAY) ---
    function handleLogout() {
        const currentRole = sessionStorage.getItem('userRole');
        if (currentRole) {
            // Gunakan keepalive: true agar request tetap jalan walaupun halaman reload
            fetch(CONST_API_URL, {
                method: 'POST',
                body: JSON.stringify({ action: 'logout', role: currentRole }),
                keepalive: true,
                headers: { "Content-Type": "text/plain;charset=utf-8" }
            }).catch(e => console.error("Logout log failed", e));
        }
        sessionStorage.removeItem('userRole');
        location.reload();
    }

    // --- AUDIT LOG ---
    async function showAuditLog() {
        const modal = new bootstrap.Modal(document.getElementById('modalAuditLog'));
        const tbody = document.getElementById('bodyAuditLog');
        tbody.innerHTML = '<tr><td colspan="3" class="text-center">Memuat log...</td></tr>';
        modal.show();

        try {
            const logs = await fetchAPI('getAuditLogs', 'GET', { role: currentUserRole });
            if (logs && logs.length > 0) {
                let html = '';
                logs.forEach(log => {
                    const date = new Date(log.timestamp).toLocaleString('id-ID');
                    let color = 'text-dark';
                    if(log.type === 'LOGIN') color = 'text-success';
                    if(log.type === 'LOGOUT') color = 'text-warning';
                    if(log.type.includes('ERROR') || log.type.includes('FAIL')) color = 'text-danger';
                    
                    html += `<tr><td class="small text-muted" style="white-space:nowrap;">${date}</td><td class="fw-bold ${color} small">${log.type}</td><td class="small">${log.message}</td></tr>`;
                });
                tbody.innerHTML = html;
            } else {
                tbody.innerHTML = '<tr><td colspan="3" class="text-center text-muted">Belum ada aktivitas terekam.</td></tr>';
            }
        } catch (e) {
            tbody.innerHTML = '<tr><td colspan="3" class="text-center text-danger">Gagal memuat log.</td></tr>';
        }
    }

    // --- DATA LOADING & OTHER LOGIC (Simplified for brevity, use previous full logic) ---
    async function loadAllData() {
        // ... (Gunakan logika loadAllData dari jawaban sebelumnya) ...
        // Untuk demo, kita panggil fetch dummy
        // fetchAPI('getDataSKK').then(data => renderSKK(data));
    }
    
    // ... (Fungsi renderSKK, renderTugas, renderProject, dll sama seperti sebelumnya) ...
    // ... (Pastikan copy logika render & pagination dari jawaban sebelumnya) ...

  </script>
</body>
</html>
